let products=[];fetch("products.json").then(t=>t.json()).then(t=>{loadProducts(products=t)});const productsContainer=document.querySelector("#products-container"),categoryButton=document.querySelectorAll(".category-button"),mainTitle=document.querySelector("#main-title");let addProduct=document.querySelectorAll(".add-product");const number=document.querySelector("#number"),searcher=document.querySelector("#searcher"),loadProducts=t=>{productsContainer.innerHTML="",t.forEach(t=>{let r=document.createElement("div");r.classList.add("product"),r.innerHTML=`
                <img class="product-img" src="${t.image}" alt="${t.title}">
                <div class="product-details">
                    <h3 class="product-title">${t.title}</h3>
                    <p class="product-price">$${t.price}</p>
                    <button class="add-product" id="${t.id}">Add</button>
                </div>
        `,productsContainer.append(r)}),updateAddProduct()},d=document;function filterProducts(t){t.target.matches("#searcher")&&d.querySelectorAll(".product").forEach(r=>r.textContent.toLowerCase().includes(t.target.value)?r.classList.remove("filtered"):r.classList.add("filtered"))}function updateAddProduct(){(addProduct=document.querySelectorAll(".add-product")).forEach(t=>{t.addEventListener("click",addToCart)})}d.addEventListener("keyup",filterProducts),categoryButton.forEach(t=>{t.addEventListener("click",t=>{if(categoryButton.forEach(t=>t.classList.remove("active")),t.currentTarget.classList.add("active"),"all"!=t.currentTarget.id){let r=products.find(r=>r.category.id===t.currentTarget.id);mainTitle.innerText=r.category.name;let e=products.filter(r=>r.category.id===t.currentTarget.id);loadProducts(e)}else mainTitle.innerText="All products",loadProducts(products)})});let productsInCart,productsInCartLS=localStorage.getItem("products-in-cart");function addToCart(t){Toastify({text:"Added product",duration:3e3,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"#f60",borderRadius:"2rem"},offset:{x:"2rem",y:"1.5rem"},onClick:function(){}}).showToast();let r=t.currentTarget.id,e=products.find(t=>t.id===r);if(productsInCart.some(t=>t.id===r)){let c=productsInCart.findIndex(t=>t.id===r);productsInCart[c].quantity++}else e.quantity=1,productsInCart.push(e);updateNumber(),localStorage.setItem("products-in-cart",JSON.stringify(productsInCart))}function updateNumber(){let t=productsInCart.reduce((t,r)=>t+r.quantity,0);number.innerText=t}productsInCartLS?(productsInCart=JSON.parse(productsInCartLS),updateNumber()):productsInCart=[];